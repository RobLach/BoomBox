<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Zoidcom: Application Design</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
  <script language="JavaScript">
    <!--
    var Img = new Array()
    function doc_image(dateiname)
    {
      this.normal     = new Image()
      this.high       = new Image()
      this.normal.src = dateiname + ".png"
      this.high.src   = dateiname + "h.png"
      return this
    }
    function load_images(name, dateiname)
    {
      Img[name] = new doc_image(dateiname)
    }
    function show_image(name)
    {
      document[name].src = Img[name].high.src
    }
    function hide_image(name)
    {
      document[name].src = Img[name].normal.src
    }
    load_images("Intro", "intro");
    load_images("Overview", "overview");
    load_images("Manual", "manual");
    load_images("Classes", "classref");
    load_images("Headers", "headref");
   -->
   </script>
</head><body>
	      <center>
        <table width="100%" border="0" cellspacing="0" cellpadding="0" height="50">
        <tr height="50">
          <td width="42" height="50" background="headleft.png"></td>
          <td align="center" height="50" background="headback.png"><img src="headcenter.png" alt=""
              height="50" width="582"></td>
          <td width="42" height="50" background="headright.png"></td>
        </tr>
        <tr>
          <td colspan="3" align="center">
            <table width="212" border="0" cellspacing="0" cellpadding="0" align="center">
              <tr>
                <td><img src="linkleft.png" alt="" height="16" width="16" border="0"></td>
                <td><a href="index.html" onMouseOver="show_image('Intro')" onMouseOut="hide_image('Intro')"><img name="Intro" src="intro.png" alt="Introduction" height="16" width="108" border="0"></a></td>
                <td><a href="Manual.html" onMouseOver="show_image('Manual')" onMouseOut="hide_image('Manual')"><img name="Manual" src="manual.png" alt="Manual" height="16" width="108" border="0"></a></td>
                <td><a href="annotated.html" onMouseOver="show_image('Classes')"                         onMouseOut="hide_image('Classes')"><img name="Classes" src="classref.png" alt="Class Reference" height="16" width="108" border="0"></a></td>
                <td><a href="files.html" onMouseOver="show_image('Headers')"                                 onMouseOut="hide_image('Headers')"><img name="Headers" src="headref.png" alt="Header Reference" height="16" width="108" border="0"></a></td>
                <td><img src="linkright.png" alt="" height="16" width="16" border="0"></td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
    </center>
    
    
    
<!-- Generated by Doxygen 1.4.6-NO -->
<h1><a class="anchor" name="AppDesign">Application Design</a></h1>Zoidcom is designed for the client/server network topology. In this topology there is one entity, the server, that everyone else connects to. This server typically has the full authority over everything that happens in the game.<p>
The job of the client is to capture user input, send it to the server, process incoming data from the server and display the game world accordingly. The client should not make any game logic decisions.<p>
The job of the server is to process incoming client input, update the client's avatar based on that input and distribute the new state to all clients. The server decides who wins, who hits whom etc.<p>
Most games have two different server modes, the dedicated server and the localhost server. The dedicated server is a pure server application without graphical output. If anyone wants to use a dedicated server to play a game, a client needs to be started seperately and used to connect to the server. A localhost server on the other hand is client and server in one program. It allows connection from remote players, but also allows one or more players to play directly.<p>
If your project is in the planning stage, it is advised to design the project for networking right from the start. Bolting on network code in a late state of the project will most likely either lead to massive refactoring or a large amount of hacking, resulting in hardly maintanable and bug ridden code.<p>
The cleanest way is to implement the whole game as if it were a pure network game. That is, implement code for a dedicated server, and implement this code for being server code only. Implement the game client code in a similar manner. Server and client can run in the same process and don't even need to use a real network socket, but they should be seperate entities and all code should be designed to work that way. When the player jumps, don't alter the player's jump vector directly, but send a 'jump-key-pressed' packet to the server and let the server handle that.<p>
This means that even in a singleplayer game, there is an invisible server running in the background. A multiplayer version of the same game just needs to connect to a remote server instead of the local one et voila, multiplayer done. The advantages of this are:<p>
<ul>
<li>no seperate code for single and multiplayer</li><li>the network code is tested and developed during the whole project</li><li>clean code</li></ul>
<p>
Projects using this scheme are almost all games using any of the Quake engines, Civilization 4, Neverwinter Nights and many many more.<p>
For connecting client and server in the same process with zero latency, local sockets can be used. These are provided by Zoidcom and pass packets directly from one <a class="el" href="classZCom__Control.html">ZCom_Control</a> to another, without going through an OS level socket.<h2><a class="anchor" name="appzoid">
Things To Expect</a></h2>
When implementing networking with Zoidcom, you will need at least these things:<p>
<ul>
<li>derive one class from <a class="el" href="classZCom__Control.html">ZCom_Control</a> and implement it as Server (<a class="el" href="Server.html">The Server</a>)</li><li>derive one class from <a class="el" href="classZCom__Control.html">ZCom_Control</a> and implement it as Client (<a class="el" href="Client.html">The Client</a>)</li><li>each network relevant game object needs a <a class="el" href="classZCom__Node.html">ZCom_Node</a> member (<a class="el" href="Layer3.html">Layer 3: Object Replication</a>)</li></ul>
<p>
Of course, there will be a lot more things to do, but in general, you need a client and a server class plus one <a class="el" href="classZCom__Node.html">ZCom_Node</a> for each of your game objects. </td></tr></table>
<hr size="1"><address style="align: right;"><small>
This file is part of the documentation for Zoidcom. Documentation copyright © 2004-2008 by Jörg Rüppel. Generated on Sat Aug 16 15:26:51 2008 for Zoidcom by&nbsp;<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6-NO</small></address>
</body>
</html>
